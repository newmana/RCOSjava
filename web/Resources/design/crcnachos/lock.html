<HTML>
<HEAD>
  <TITLE>
    Lock CRC
  </TITLE>
</HEAD>

<BODY TEXT="#eeeeee" BGCOLOR="#000000" LINK="#ffff00" VLINK="#999999"> 

<P ALIGN=CENTER>
  [
    <A HREF="../../index.html">
      RCOS.java Home 
    </A>
  |
    <A HREF="../../../index.html">
      RCOS Home 
    </A>
  |
    <A HREF="../../../../../david-jones.html">
      David's Home 
    </A>
  ]
    
<H1>
  <TT>Lock</TT> CRC
</H1>

<TABLE>
  <TR>
    <TD VALIGN=TOP>
      <H3>Name:</H3>
    </TD>
    <TD VALIGN=TOP>
      Lock
    </TD>
  </TR>

  <TR>
    <TD VALIGN=TOP>
      <H3>Comment:</H3>
    </TD>
    <TD VALIGN=TOP>
 The following class defines a "lock".  A lock can be BUSY or FREE.
 There are only two operations allowed on a lock:
<P>
      Acquire -- wait until the lock is FREE, then set it to BUSY
<P>
      Release -- set lock to be FREE, waking up a thread waiting
              in Acquire if necessary
<P>
 In addition, by convention, only the thread that acquired the lock
 may release it.  As with semaphores, you can't read the lock value
 (because the value might change immediately after you read it).
    </TD>
  </TR>

  <TR>
    <TD VALIGN=TOP>
      <H3>Collaborators:</H3>
    </TD>
    <TD VALIGN=TOP>
    </TD>
  </TR>
</TABLE>

  <H3>
      Responsibilities:
  </H3>
  
<PRE>
class Lock {
  public:
    Lock(char* debugName);              // initialize lock to be FREE
    ~Lock();                            // deallocate lock
    char* getName() { return name; }    // debugging assist

    void Acquire(); // these are the only operations on a lock
    void Release(); // they are both *atomic*

    bool isHeldByCurrentThread();       // true if the current thread
                                        // holds this lock.  Useful for
                                        // checking in Release, and in
                                        // Condition variable ops below.

  private:
    char* name;                         // for debugging
    // plus some other stuff you'll need to define
};                     
</PRE>

</BODY>
</HTML>

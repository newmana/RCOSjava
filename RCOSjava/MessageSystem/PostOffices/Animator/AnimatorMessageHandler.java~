//***************************************************************************
// FILE     : AnimatorMessageHandler.java
// PACKAGE  : MessageSystem
// PURPOSE  : Provide sending and receiving facilities for all classes.
// AUTHOR   : Bruce Jamieson
// MODIFIED : Andrew Newman
// HISTORY  : 24/01/96 Created
//            ??/??/96 Fixed bug nolonger registers to postoffice
//                     automatically.
//            20/05/97 Changed message system
//            21/05/97 Added LocalSendMessage to all posting of a message
//                     to the local Post Office instead of broadcasting
//                     it everywhere.
//
//***************************************************************************/

package MessageSystem.PostOffices.Animator;

import MessageSystem.PostOffices.SimpleMessageHandler;
import MessageSystem.Messages.Animator.AnimatorMessageAdapter;
import MessageSystem.Messages.Universal.UniversalMessageAdapter;
import MessageSystem.Messages.AddHandler;
import MessageSystem.Messages.MessageAdapter;

public abstract class AnimatorMessageHandler extends SimpleMessageHandler
{
  protected AnimatorOffice mhThePostOffice;

  public AnimatorMessageHandler()
	{
	}
	
	public AnimatorMessageHandler(String sMyID, AnimatorOffice mhNewPostOffice)
	{
		sID = sMyID;
    // Save myId and a pointer the PostOffice
    mhThePostOffice = mhNewPostOffice;
    // Tell the PostOffice that I'm alive
    AddHandler newMessage = new AddHandler(this, sMyID, this);
    mhNewPostOffice.processMessage(newMessage);
  }

	public void sendMessage(MessageAdapter aMessage)
	{
		mhThePostOffice.sendMessage(aMessage);
	}
	
	public void sendMessage(AnimatorMessageAdapter aMessage)
  {
    //System.out.println( "simpleMsgHdlr: sending message from " +
    //                   aMessage.source + " to " + aMessage.dest );
    localSendMessage(aMessage);
  }

	public void sendMessage(UniversalMessageAdapter aMessage)
	{
    mhThePostOffice.sendMessage(aMessage);
	}
	
  public void localSendMessage(MessageAdapter aMessage)
	{
		mhThePostOffice.localSendMessage(aMessage);
	}
	
	public void localSendMessage(AnimatorMessageAdapter aMessage)
  {
    //System.out.println( "simpleMsgHdlr: sending message from " +
    //                   aMessage.source + " to " + aMessage.dest );
    mhThePostOffice.localSendMessage(aMessage);
  }
	
	public void processMessage(MessageAdapter mMessage)
	{
		try
		{
			processMessage((UniversalMessageAdapter) mMessage);	
		}
		catch (Exception e)
		{
			e.printStackTrace();
		}
	}
	
  public abstract void processMessage(AnimatorMessageAdapter mMessage);
	public abstract void processMessage(UniversalMessageAdapter mMessage);
}
